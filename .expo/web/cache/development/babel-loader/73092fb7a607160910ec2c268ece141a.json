{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ahmet\\\\OneDrive\\\\Masa\\xFCst\\xFC\\\\WebSocket\\\\src\\\\Contexts\\\\WebSocketContext.js\";\n\nimport React, { useState } from 'react';\nvar WebSocketContext = React.createContext(null);\nvar WebsocketConsumer = WebSocketContext.Consumer;\n\nvar WebSocketProvider = function WebSocketProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var message = JSON.stringify({\n    'event': 'subscribe',\n    'pair': ['XBT/USD'],\n    'subscription': {\n      'name': 'book'\n    }\n  });\n  var ws = new WebSocket('wss://ws.kraken.com/');\n\n  ws.open = function () {\n    ws.send(message);\n  };\n\n  ws.onerror = function (e) {};\n\n  ws.onmessage = function (e) {\n    var msg = JSON.parse(e.data);\n    var array = [];\n\n    if (msg.length > 0) {\n      msg.map(function (item) {\n        if (typeof item.b !== 'undefined') {\n          array = item.b[0];\n        }\n      });\n\n      if (typeof array[0] !== 'undefined') {\n        console.log(array);\n        setData(array);\n      }\n    }\n  };\n\n  return React.createElement(WebSocketContext.Provider, {\n    value: {\n      data: data\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, children);\n};\n\nexport { WebSocketContext, WebSocketProvider, WebsocketConsumer };","map":{"version":3,"sources":["C:/Users/ahmet/OneDrive/Masaüstü/WebSocket/src/Contexts/WebSocketContext.js"],"names":["React","useState","WebSocketContext","createContext","WebsocketConsumer","Consumer","WebSocketProvider","children","data","setData","message","JSON","stringify","ws","WebSocket","open","send","onerror","e","onmessage","msg","parse","array","length","map","item","b","console","log"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAEA,IAAMC,gBAAgB,GAAGF,KAAK,CAACG,aAAN,CAAoB,IAApB,CAAzB;AACA,IAAMC,iBAAiB,GAAGF,gBAAgB,CAACG,QAA3C;;AAEA,IAAMC,iBAAiB,GAAC,SAAlBA,iBAAkB,OAAc;AAAA,MAAZC,QAAY,QAAZA,QAAY;;AAAA,kBACZN,QAAQ,CAAC,EAAD,CADI;AAAA;AAAA,MAC3BO,IAD2B;AAAA,MACtBC,OADsB;;AAElC,MAAMC,OAAO,GAAGC,IAAI,CAACC,SAAL,CAAe;AAC3B,aAAS,WADkB;AAE3B,YAAQ,CACN,SADM,CAFmB;AAK3B,oBAAgB;AACd,cAAQ;AADM;AALW,GAAf,CAAhB;AASA,MAAIC,EAAE,GAAG,IAAIC,SAAJ,CAAc,sBAAd,CAAT;;AACAD,EAAAA,EAAE,CAACE,IAAH,GAAU,YAAK;AACXF,IAAAA,EAAE,CAACG,IAAH,CAAQN,OAAR;AACH,GAFD;;AAIAG,EAAAA,EAAE,CAACI,OAAH,GAAa,UAACC,CAAD,EAAM,CAElB,CAFD;;AAIAL,EAAAA,EAAE,CAACM,SAAH,GAAe,UAACD,CAAD,EAAO;AAClB,QAAME,GAAG,GAAGT,IAAI,CAACU,KAAL,CAAWH,CAAC,CAACV,IAAb,CAAZ;AACA,QAAIc,KAAK,GAAG,EAAZ;;AACA,QAAIF,GAAG,CAACG,MAAJ,GAAa,CAAjB,EAAoB;AAClBH,MAAAA,GAAG,CAACI,GAAJ,CAAQ,UAACC,IAAD,EAAU;AAAE,YAAI,OAAQA,IAAI,CAACC,CAAb,KAAoB,WAAxB,EAAqC;AAAEJ,UAAAA,KAAK,GAAGG,IAAI,CAACC,CAAL,CAAO,CAAP,CAAR;AAAoB;AAAE,OAAjF;;AACA,UAAI,OAAQJ,KAAK,CAAC,CAAD,CAAb,KAAsB,WAA1B,EAAuC;AACrCK,QAAAA,OAAO,CAACC,GAAR,CAAYN,KAAZ;AACAb,QAAAA,OAAO,CAACa,KAAD,CAAP;AAED;AACF;AACJ,GAXD;;AAYA,SACI,oBAAC,gBAAD,CAAkB,QAAlB;AACC,IAAA,KAAK,EAAE;AACHd,MAAAA,IAAI,EAAJA;AADG,KADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKKD,QALL,CADJ;AASH,CAzCD;;AA2CA,SAAQL,gBAAR,EAAyBI,iBAAzB,EAA2CF,iBAA3C","sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst WebSocketContext = React.createContext(null);\r\nconst WebsocketConsumer = WebSocketContext.Consumer;\r\n\r\nconst WebSocketProvider=({children})=>{\r\n    const [data,setData]= useState({});\r\n    const message = JSON.stringify({\r\n        'event': 'subscribe',\r\n        'pair': [\r\n          'XBT/USD',\r\n        ],\r\n        'subscription': {\r\n          'name': 'book',\r\n        },\r\n      });\r\n    var ws = new WebSocket('wss://ws.kraken.com/');\r\n    ws.open = () =>{\r\n        ws.send(message);\r\n    };\r\n\r\n    ws.onerror = (e) =>{\r\n\r\n    }\r\n\r\n    ws.onmessage = (e) => {\r\n        const msg = JSON.parse(e.data);\r\n        let array = [];\r\n        if (msg.length > 0) {\r\n          msg.map((item) => { if (typeof (item.b) !== 'undefined') { array = item.b[0]; } });\r\n          if (typeof (array[0]) !== 'undefined') {\r\n            console.log(array);\r\n            setData(array);\r\n           \r\n          }\r\n        }\r\n    }\r\n    return(\r\n        <WebSocketContext.Provider \r\n         value={{ \r\n             data,\r\n         }}\r\n        >\r\n            {children}\r\n        </WebSocketContext.Provider>\r\n    );\r\n}\r\n\r\nexport {WebSocketContext,WebSocketProvider,WebsocketConsumer};"]},"metadata":{},"sourceType":"module"}